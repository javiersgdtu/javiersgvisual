var scrolly=d3.select(".part-3"),figure=scrolly.select(".chart"),article=scrolly.select(".bars-text-0"),step=article.selectAll(".step"),housesvg=figure.select(".container-svg").select("#house-svg"),scroller=scrollama(),scroller_heat=scrollama();function handleStepEnter(e){var t="down"==e.direction?0:1,s="down"==e.direction?"visible":"hidden",i="down"==e.direction;if(1==e.index)figure.select(".background-img").transition().duration(3e3).style("opacity",t),figure.select(".container-svg").transition().duration(1e3).style("opacity",+!t);else if(2==e.index){var l=housesvg.select("g").select("#living_room"),r=housesvg.select("g").selectAll("#basement,#cave");l.transition().duration(1e3).style("stroke-width","10px").style("opacity",1).transition().delay(1e3).duration(1e3).style("stroke-width","0.5px").style("opacity",.5),r.transition().delay(2e3).duration(1e3).style("stroke-width","10px").style("opacity",1).transition().delay(1e3).duration(1e3).style("stroke-width","0.5px").style("opacity",.5),d3.select("#area").remove(),d3.select("#house-svg").append("text").attr("id","area").text("Living Room").attr("text-anchor","middle").attr("x",posX+100).attr("y",100).transition().delay(2e3).text("Basement & Bunker").transition().delay(3e3).remove()}else 3==e.index?(housesvg.select("#legend-force").style("visibility",s),housesvg.select(".text-legend").style("visibility",s)):4==e.index?(forceCharacters(1),housesvg.select(".character-circles").style("visibility",s)):5==e.index&&(figure.select(".switch").style("visibility",s),figure.select("#sliderCheck").attr("checked",i),figure.select("#sliderCheck").attr("checkedStory",i),handleCheck(figure.select("#sliderCheck").node()),housesvg.select("#house-heat").style("visibility",s),figure.select(".house-map").style("visibility",s),housesvg.select(".house-map").style("visibility",s))}function init(){scroller.setup({step:".step",offset:.5,debug:!1}).onStepEnter(handleStepEnter)}init();