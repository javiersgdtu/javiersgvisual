var radius=20,svg=d3.select(".container-svg").select("svg"),palette=Characters.map((function(t){return t.Color})),characters=Characters.map((function(t){return t.Character})),colorCharacter=d3.scaleOrdinal(palette).domain(characters),characters_leg=Characters.filter((function(t){return"First chaufer"!=t.Character&"Party attendants"!=t.Character}));svg.append("g").selectAll("defs").data(characters_leg).enter().append("pattern").attr("id",(function(t){return t.urlImage?t.id:""})).attr("width","100%").attr("height","100%").attr("viewBox","0 0 1 1").attr("preserveAspectRatio","xMidYMid slice").append("image").attr("width","1").attr("height","1").attr("preserveAspectRatio","xMidYMid slice").attr("xlink:href",(function(t){return t.urlImage}));var j=0,circles=svg.append("g").attr("class","character-circles").selectAll("circle").data(characters_leg).enter().append("circle").attr("id",t=>t.Character.replace(/\s/g,"").replace(/[.]/g,"")).attr("r",radius).attr("cx",(function(t,r){return t.cx=r>=8?r-8:r<=3?r:r-4,1300+t.cx*radius*2.5})).attr("cy",(function(t,r){return t.cy=r>=8?2:r<=3?0:1,240+t.cy*radius*2.5})).attr("fill",(function(t){return colorCharacter(t.Character)})).on("mouseover",(function(t,r){d3.select(this).raise().transition().duration(1e3).ease(d3.easeLinear).attr("fill",(function(t,r){return t.urlImage?"url(#"+t.id+")":"orange"})).attr("r",4*radius).attr("stroke",(function(t){return colorCharacter(t.Character)})).attr("stroke-width",15).attr("stroke-dasharray",10),tooltip.html("<b>Character:</b> "+r.Character+"</br><b>Family:</b> "+r.Family+" </br><b>Role:</b> "+r.Role+" </br><b>Actor:</b> "+r.Actor).transition().duration(200).style("visibility","visible").style("opacity",.9).style("left",1300+4*r.cx+"px").style("top",300+r.cy*radius*2.5+"px")})).on("mouseout",(function(t,r){d3.select(this).transition().duration(1e3).attr("fill",(function(t){return colorCharacter(t.Character)})).attr("r",radius).attr("stroke-width",0),tooltip.transition().duration(200).style("visibility","hidden")}));svg.select(".character-circles").append("text").attr("x",1320).attr("y",200).text("CHARACTERS").attr("font-family","parasite").attr("font-size",20);